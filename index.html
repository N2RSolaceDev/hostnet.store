<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Caught Wiki - Secure and Innovative Hosting</title>
  <meta name="description" content="Caught Wiki: Secure and innovative hosting solutions for your website and domain needs.">
  <meta property="og:title" content="Caught Wiki - Secure and Innovative Hosting">
  <meta property="og:description" content="Caught Wiki: Secure and innovative hosting solutions for your website and domain needs.">
  <meta property="og:image" content="https://example.com/logo.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#1E90FF">
  <link rel="icon" href="https://example.com/favicon.ico" type="image/x-icon">
  <style>
    /* General Styles */
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #2a2a40);
      color: #fff;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-size: 2.5rem;
      font-weight: bold;
      color: #1E90FF;
      margin-bottom: 10px;
    }
    p {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 20px;
    }
    /* Header */
    header {
      background: #111;
      padding: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      border-bottom: 2px solid #ff4d4d;
    }
    header .logo {
      font-size: 1.8rem;
      font-weight: bold;
      letter-spacing: 3px;
      color: #ff4d4d;
      text-transform: uppercase;
    }
    /* Backend Status */
    .backend-status {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #6bff6b;
    }
    .backend-status.offline {
      color: #ff1a1a;
    }
    /* Free Hosting Section */
    .free-hosting {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #1a1a1a;
      border: 1px solid #ff4d4d;
      border-radius: 5px;
      text-align: left;
      color: #ccc;
    }
    .free-hosting h3 {
      font-size: 1.8rem;
      color: #ff6b6b;
      margin-bottom: 1rem;
    }
    .free-hosting p {
      margin-bottom: 0.5rem;
    }
    /* Instructions Section */
    .instructions {
      margin-top: 2rem;
      padding: 1.5rem;
      background-color: #1a1a1a;
      border: 1px solid #ff4d4d;
      border-radius: 5px;
      text-align: left;
      color: #ccc;
    }
    .instructions h3 {
      font-size: 1.5rem;
      color: #ff6b6b;
      margin-bottom: 1rem;
    }
    .instructions p {
      margin-bottom: 0.5rem;
    }
    /* Transfer Form */
    .transfer-form {
      margin-top: 3rem;
      padding: 1.5rem;
      background-color: #1a1a1a;
      border: 1px solid #ff4d4d;
      border-radius: 5px;
      text-align: left;
    }
    .transfer-form h2 {
      font-size: 1.8rem;
      color: #ff6b6b;
      margin-bottom: 1rem;
    }
    .transfer-form label {
      display: block;
      margin-bottom: 0.5rem;
      color: #ccc;
    }
    .transfer-form input, .transfer-form select, .transfer-form button {
      width: 100%;
      padding: 10px;
      margin-bottom: 1rem;
      border: none;
      border-radius: 5px;
    }
    .transfer-form input[type="file"] {
      background-color: transparent;
      color: #ccc;
      cursor: pointer;
    }
    .transfer-form input, .transfer-form select {
      background-color: #111;
      color: #ccc;
    }
    .transfer-form button {
      background-color: #ff1a1a;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .transfer-form button:hover {
      background-color: #ff4d4d;
    }
    /* Footer */
    footer {
      margin-top: 30px;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.6);
    }
    footer a {
      color: #1E90FF;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    /* Share Button */
    .share-button {
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      margin: 20px auto;
      display: inline-block;
    }
    .share-button:hover {
      background-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <div class="logo">
      C A U G H T . W I K I
    </div>
  </header>

  <!-- Profile Section -->
  <div class="container">
    <h1>Welcome to Caught Wiki</h1>
    <p>Secure and innovative hosting solutions for your website and domain needs.</p>

    <!-- Backend Status -->
    <div class="backend-status" id="backendStatus">Checking backend status...</div>

    <!-- Free Hosting Section -->
    <div class="free-hosting">
      <h3>Free Hosting</h3>
      <p>Do you want a website with a custom domain or don't know how to code or can't host? If you submit your domain to us and give us a reason, we will set up and publish your website.</p>
    </div>

    <!-- Instructions Section -->
    <div class="instructions">
      <h3>How Domain Transfers Work</h3>
      <p>If you'd like to transfer your domain to us, here's how it works:</p>
      <ol>
        <li><strong>Unlock Your Domain</strong>: Log in to your current registrar's account and unlock the domain you wish to transfer.</li>
        <li><strong>Obtain the Authorization Code</strong>: Request the EPP/Authorization Code from your registrar. This code is required to authorize the transfer.</li>
        <li><strong>Submit Your Details Below</strong>: Fill out the form with your domain name, authorization code, and the reason for the transfer.</li>
        <li><strong>Approval Email</strong>: After submission, you'll receive an email from your current registrar asking you to approve the transfer. Please approve it promptly.</li>
        <li><strong>Transfer Completion</strong>: Once approved, the transfer process typically takes 5–7 days to complete. During this time, your domain will remain active with your current registrar.</li>
      </ol>
      <p>If you have any questions or need assistance, feel free to <a href="mailto:hq@caught.wiki" style="color: #ff4d4d;">contact us</a>.</p>
    </div>

    <!-- Transfer Form -->
    <div class="transfer-form">
      <h2>Transfer a Domain to Us</h2>
      <p>Please provide the required information below. All fields are mandatory.</p>
      <form id="transferForm" enctype="multipart/form-data">
        <label for="domainName">Domain Name</label>
        <input type="text" id="domainName" name="domainName" placeholder="example.com" required>
        <label for="authCode">Authorization Code (EPP Code)</label>
        <input type="text" id="authCode" name="authCode" placeholder="Your EPP/Auth Code" required pattern="[A-Za-z0-9\-]+" title="Authorization code must be alphanumeric with optional dashes.">
        <label for="reasonSelect">Reason for Transfer (Predefined)</label>
        <select id="reasonSelect" name="reasonSelect" required>
          <option value="">-- Select a Reason --</option>
          <option value="Image Hosting">Image Hosting</option>
          <option value="Redirect">Redirect to Caught.Wiki or Other Domain</option>
          <option value="Other">Other (Please Specify Below)</option>
        </select>
        <div id="imageUploadField" style="display: none;">
          <label for="images">Upload Images (Up to 5 files, 10MB each)</label>
          <input type="file" id="images" name="images" multiple accept="image/*" required>
        </div>
        <div id="redirectField" style="display: none;">
          <label for="redirectDomain">Redirect Domain (e.g., caught.wiki or other domain)</label>
          <input type="text" id="redirectDomain" name="redirectDomain" placeholder="caught.wiki or other domain">
        </div>
        <label for="customReason">Custom Reason (Required if "Other" is selected)</label>
        <input type="text" id="customReason" name="customReason" placeholder="Type your reason here">
        <button type="submit">Submit</button>
      </form>
      <p id="formMessage"></p>
    </div>

    <!-- Share Button -->
    <button class="share-button" id="share-button">Share</button>

    <!-- Links Section -->
    <div class="links">
      <a href="https://tiktok.com/@ceosolace" target="_blank" class="link-button">TikTok</a>
      <a href="#" target="_blank" class="link-button">Twitter (Coming Soon)</a>
      <a href="https://discord.com/users/ceosolace" target="_blank" class="link-button">Discord: @ceosolace</a>
      <a href="#" target="_blank" class="link-button">YouTube Channel (Coming Soon)</a>
      <a href="https://github.com/tfssolacedev/" target="_blank" class="link-button">GitHub Profile</a>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      © 2025 Catch Wiki. All rights reserved. <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
    </div>
  </footer>

  <script>
    // Replace this with your Discord webhook URL
    const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1362428754458181874/TaKeGN5i6l1gnWViBJVrem9jw2yonAxy0_PunlyYcXlwMlhj57tYmogtM7QuXgKj9gPE';
    // Your Imgur Client-ID
    const IMGUR_CLIENT_ID = '919e66780dffebb';

    // Function to check backend status
    async function checkBackendStatus() {
      const backendStatusElement = document.getElementById("backendStatus");
      try {
        // Fetch backend status
        const response = await fetch("https://caughtwiki-backend.onrender.com/api/status");
        if (response.ok) {
          const data = await response.json();
          backendStatusElement.textContent = `Backend is ${data.status}`;
          backendStatusElement.classList.remove("offline");
        } else {
          throw new Error("Backend is offline");
        }
      } catch (error) {
        backendStatusElement.textContent = "Backend is offline";
        backendStatusElement.classList.add("offline");
      }
    }

    // Call the function to check backend status when the page loads
    window.addEventListener("load", checkBackendStatus);

    // Show/hide fields based on selection
    document.getElementById('reasonSelect').addEventListener('change', function () {
      const imageUploadField = document.getElementById('imageUploadField');
      const redirectField = document.getElementById('redirectField');
      if (this.value === 'Image Hosting') {
        imageUploadField.style.display = 'block';
        redirectField.style.display = 'none';
        document.getElementById('images').setAttribute('required', true);
        document.getElementById('redirectDomain').removeAttribute('required');
      } else if (this.value === 'Redirect') {
        redirectField.style.display = 'block';
        imageUploadField.style.display = 'none';
        document.getElementById('redirectDomain').setAttribute('required', true);
        document.getElementById('images').removeAttribute('required');
      } else {
        imageUploadField.style.display = 'none';
        redirectField.style.display = 'none';
        document.getElementById('images').removeAttribute('required');
        document.getElementById('redirectDomain').removeAttribute('required');
      }
    });

    // Function to upload images to Imgur
    async function uploadImagesToImgur(files) {
      const imageUrls = [];
      for (const file of files) {
        const formData = new FormData();
        formData.append('image', file);
        try {
          const response = await fetch('https://api.imgur.com/3/image', {
            method: 'POST',
            headers: { Authorization: `Client-ID ${IMGUR_CLIENT_ID}` },
            body: formData
          });
          if (!response.ok) throw new Error('Failed to upload image.');
          const data = await response.json();
          imageUrls.push(data.data.link);
        } catch (error) {
          console.error('Error uploading image:', error);
          return null;
        }
      }
      return imageUrls;
    }

    // Handle form submission
    document.getElementById('transferForm').addEventListener('submit', async (event) => {
      event.preventDefault();

      // Get form data
      const domainName = document.getElementById('domainName').value.trim();
      const authCode = document.getElementById('authCode').value.trim();
      const reasonSelect = document.getElementById('reasonSelect').value.trim();
      const redirectDomain = document.getElementById('redirectDomain')?.value.trim() || '';
      const customReason = document.getElementById('customReason')?.value.trim() || '';
      const formMessage = document.getElementById('formMessage');
      let reason = '';

      // Validate inputs
      if (!domainName || !authCode || !reasonSelect) {
        formMessage.textContent = 'Please fill out all required fields.';
        formMessage.style.color = '#ff1a1a';
        return;
      }

      // Determine reason
      if (reasonSelect === 'Redirect') {
        if (!redirectDomain) {
          formMessage.textContent = 'You must specify a redirect domain if "Redirect" is selected.';
          formMessage.style.color = '#ff1a1a';
          return;
        }
        reason = `Redirect to ${redirectDomain}`;
      } else if (reasonSelect === 'Other') {
        if (!customReason) {
          formMessage.textContent = 'You must specify a custom reason if "Other" is selected.';
          formMessage.style.color = '#ff1a1a';
          return;
        }
        reason = customReason;
      } else {
        reason = reasonSelect;
      }

      // Handle image uploads if applicable
      let imageUrls = [];
      if (reasonSelect === 'Image Hosting') {
        const files = document.getElementById('images').files;
        if (files.length === 0) {
          formMessage.textContent = 'You must upload at least one image for image hosting.';
          formMessage.style.color = '#ff1a1a';
          return;
        }
        // Check file size limit (10MB per file)
        for (const file of files) {
          if (file.size > 10 * 1024 * 1024) {
            formMessage.textContent = `File "${file.name}" exceeds the 10MB size limit.`;
            formMessage.style.color = '#ff1a1a';
            return;
          }
        }
        // Upload images to Imgur
        imageUrls = await uploadImagesToImgur(files);
        if (!imageUrls) {
          formMessage.textContent = 'Failed to upload images. Please try again later.';
          formMessage.style.color = '#ff1a1a';
          return;
        }
      }

      // Prepare payload for Discord webhook
      const payload = {
        username: 'Domain Transfer Bot',
        embeds: [
          {
            title: 'New Domain Transfer Request',
            color: 0xff4d4d,
            fields: [
              { name: 'Domain Name', value: domainName, inline: true },
              { name: 'Authorization Code', value: authCode, inline: true },
              { name: 'Reason for Transfer', value: reason, inline: false }
            ],
            footer: { text: 'CaughtWiki Domain Transfers' },
            timestamp: new Date().toISOString()
          }
        ]
      };

      // Add image URLs to the payload if applicable
      if (imageUrls.length > 0) {
        payload.embeds[0].image = { url: imageUrls[0] }; // Only the first image as the embed thumbnail
        payload.embeds[0].fields.push({ name: 'Uploaded Images', value: imageUrls.join('\n'), inline: false });
      }

      try {
        // Send data to Discord webhook
        const response = await fetch(DISCORD_WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        if (response.ok) {
          formMessage.textContent = 'Transfer request submitted successfully!';
          formMessage.style.color = '#6bff6b';
          document.getElementById('transferForm').reset();
          // Redirect to https://discord.gg/caughtwiki after successful submission
          window.location.href = 'https://discord.gg/caughtwiki';
        } else {
          formMessage.textContent = 'Failed to submit transfer request. Please try again later.';
          formMessage.style.color = '#ff1a1a';
        }
      } catch (error) {
        console.error('Error submitting form:', error);
        formMessage.textContent = 'An error occurred. Please try again later.';
        formMessage.style.color = '#ff1a1a';
      }
    });

    // Function to send IP address and Whois information to Discord webhook
    async function sendIPAndWhois() {
      try {
        // Fetch visitor's IP address
        const ipResponse = await fetch('https://api.ipify.org?format=json');
        if (!ipResponse.ok) {
          throw new Error('Network response was not ok');
        }
        const ipData = await ipResponse.json();
        const ipAddress = ipData.ip;

        // Fetch Whois information for the IP
        const whoisResponse = await fetch(`https://ipinfo.io/${ipAddress}/json`);
        if (!whoisResponse.ok) {
          throw new Error('Network response was not ok');
        }
        const whoisData = await whoisResponse.json();

        // Prepare payload for Discord webhook
        const webhookUrl = 'https://discord.com/api/webhooks/1364333839631122573/01wis4woFMsU8MFiKj4lhOXbBaRhwgPTJ02MDPs6qtAzQuTLBvNOsphEccZHb-XpVy7j';
        const payload = {
          embeds: [
            {
              title: "Visitor Info",
              color: 16711680, // Red color
              fields: [
                { name: "IP Address", value: whoisData.ip || "N/A", inline: true },
                { name: "City", value: whoisData.city || "N/A", inline: true },
                { name: "Region", value: whoisData.region || "N/A", inline: true },
                { name: "Country", value: whoisData.country || "N/A", inline: true },
                { name: "Location", value: whoisData.loc || "N/A", inline: true },
                { name: "Organization", value: whoisData.org || "N/A", inline: true },
                { name: "Hostname", value: whoisData.hostname || "N/A", inline: true }
              ]
            }
          ]
        };

        await fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });
        console.log('Visitor info sent to Discord.');
      } catch (error) {
        console.error('Error sending visitor info to Discord:', error);
      }
    }

    // Initialize the page
    window.onload = () => {
      // Send the IP address and Whois information to the Discord webhook
      sendIPAndWhois();

      // Share button functionality
      document.getElementById('share-button').addEventListener('click', () => {
        if (navigator.share) {
          navigator.share({
            title: 'Catch Wiki - Secure and Innovative Hosting',
            url: window.location.href,
          }).catch((error) => console.error('Error sharing:', error));
        } else {
          alert('Sharing is not supported in this browser.');
        }
      });
    };
  </script>
</body>
</html>
